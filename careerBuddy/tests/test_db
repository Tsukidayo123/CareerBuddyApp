# tests/test_db.py
import pytest
from careerbuddy.services.db import CareerDB

@pytest.fixture
def db():
    # inâ€‘memory DB for speed & isolation
    return CareerDB(":memory:")

def test_add_and_fetch_job(db):
    job_id = db.add_job("Acme Corp", "Software Engineer", "To Apply")
    jobs = db.get_all_jobs()
    assert len(jobs) == 1
    assert jobs[0][0] == job_id
    assert jobs[0][1] == "Acme Corp"
